# ===================================================================
# dogm_ros 파라미터 설정 파일 (최종 정리 버전)
# ===================================================================

# 1. ROS 토픽 및 좌표계 설정
# -------------------------------------------------------------------
lidar_topic: "/scan"
radar_topic: "/ti_mmwave/radar_scan_pcl_0"
grid_topic: "/dogm/grid"
marker_topic: "/dogm/markers"
base_frame: "base_link"
odom_topic: "/odom"

# 2. 그리드 맵 및 필터 기본 설정
# -------------------------------------------------------------------
grid_size: 3.0
grid_resolution: 0.15
filter_update_rate: 10.0

# 3. 파티클 필터 및 프로세스 모델 (알고리즘 핵심)
# -------------------------------------------------------------------
num_particles: 20000
max_velocity: 1.5
process_noise_pos: 0.03
process_noise_vel: 0.1
persistence_prob: 0.99
birth_prob: 0.02

# 4. 신규 파티클 생성 관련 설정
# -------------------------------------------------------------------
newborn_vel_stddev: 0.3
dynamic_newborn_vel_stddev: 1.5

# 5. 속도 감쇠 및 동적/정적 분류
# -------------------------------------------------------------------
velocity_damping_threshold: 0.6
velocity_damping_factor: 0.2
static_velocity_threshold: 0.1

# 6. Radar 센서 퓨전 관련 설정
# -------------------------------------------------------------------
use_radar: true
# 6a. Radar 힌트 생성 관련
radar_buffer_size: 5
min_radar_points: 2
radar_hint_search_radius: 3
min_dynamic_birth_ratio: 0.1
max_dynamic_birth_ratio: 0.9
max_radar_speed_for_scaling: 1.0
# 6b. [신규] Radar 가중치 갱신 (핵심 개선)
# 파티클 가설 검증 시 사용할 레이다 range_rate의 노이즈 표준편차 (m/s)
radar_noise_stddev: 0.25
# 6c. [신규] 안전망 1: Measurement Correction (측면 이동 보정)
# 파티클이 이미 '동적'일 때, 레이다가 '정적'(vr=0)으로 측정해도 파티클을 신뢰할지 여부
use_measurement_correction: true
# 6d. [신규] 안전망 2: False Static Detection (느린 보행자 보정)
# '빈 공간'이었던 셀이 '정적'으로 바뀌었을 때 '동적'으로 강제 변경할지 여부
use_false_static_detection: true
# '정적'으로 간주되기 시작하는 최소 프레임 수
fsd_T_static: 4
# '빈 공간'으로 간주되기 위한 최소 프레임 수
fsd_T_free: 10


# 7. 기타 부가 기능 설정
# -------------------------------------------------------------------
show_velocity_arrows: true
use_ego_comp: true
max_velocity_for_scaling: 2.0